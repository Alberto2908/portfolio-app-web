<div class="habilidades-container" id="habilidades">
  <div class="section-header">
    <h2 class="section-title">{{ 'habilidades.title' | translate }}</h2>
    <a *ngIf="isAdmin$ | async" class="add-skill-btn" routerLink="/portfolio/admin/habilidades" [attr.aria-label]="'habilidades.title' | translate">+</a>
  </div>
  
  <div class="skills-grid">
    <!-- Columna izquierda: Frontend y Herramientas -->
    <div class="skills-column">
      <ng-container *ngFor="let group of grouped">
        <div class="skills-table-wrapper" *ngIf="group.category === 'frontend' || group.category === 'tools'">
          <h3 class="category-title">{{ getCategoryName(group.category) }}</h3>
          <div class="skills-table">
            <div class="table-body">
              <div class="table-row" [ngClass]="{'has-actions': isAdmin$ | async}" *ngFor="let habilidad of group.items; trackBy: trackByHabilidadId">
                <div class="cell skill-icon-cell">
                  <img [src]="imageSrc(habilidad)" [alt]="habilidad.name" class="skill-icon" (error)="onImageError($event)">
                </div>
                <div class="cell skill-name-cell">
                  <span class="skill-name">{{ habilidad.name }}</span>
                </div>
                <div class="cell skill-actions-cell" *ngIf="isAdmin$ | async">
                  <button type="button" class="action-icon edit" (click)="onEdit(habilidad)" aria-label="Editar" title="Editar">
                    <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <path d="M12 20h9"/>
                      <path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4 12.5-12.5z"/>
                    </svg>
                  </button>
                  <button type="button" class="action-icon delete" (click)="onDelete(habilidad)" aria-label="Borrar" title="Borrar">
                    <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <polyline points="3 6 5 6 21 6"/>
                      <path d="M19 6l-1 14a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2L5 6"/>
                      <path d="M10 11v6"/>
                      <path d="M14 11v6"/>
                      <path d="M9 6V4a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2"/>
                    </svg>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </ng-container>
    </div>

    <!-- Columna derecha: Backend y Base de Datos -->
    <div class="skills-column">
      <ng-container *ngFor="let group of grouped">
        <div class="skills-table-wrapper" *ngIf="group.category === 'backend' || group.category === 'database'">
          <h3 class="category-title">{{ getCategoryName(group.category) }}</h3>
          <div class="skills-table">
            <div class="table-body">
              <div class="table-row" [ngClass]="{'has-actions': isAdmin$ | async}" *ngFor="let habilidad of group.items; trackBy: trackByHabilidadId">
                <div class="cell skill-icon-cell">
                  <img [src]="imageSrc(habilidad)" [alt]="habilidad.name" class="skill-icon" (error)="onImageError($event)">
                </div>
                <div class="cell skill-name-cell">
                  <span class="skill-name">{{ habilidad.name }}</span>
                </div>
                <div class="cell skill-actions-cell" *ngIf="isAdmin$ | async">
                  <button type="button" class="action-icon edit" (click)="onEdit(habilidad)" aria-label="Editar" title="Editar">
                    <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <path d="M12 20h9"/>
                      <path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4 12.5-12.5z"/>
                    </svg>
                  </button>
                  <button type="button" class="action-icon delete" (click)="onDelete(habilidad)" aria-label="Borrar" title="Borrar">
                    <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <polyline points="3 6 5 6 21 6"/>
                      <path d="M19 6l-1 14a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2L5 6"/>
                      <path d="M10 11v6"/>
                      <path d="M14 11v6"/>
                      <path d="M9 6V4a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2"/>
                    </svg>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </ng-container>
    </div>
  </div>
</div>
